<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Session - WorkHome</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .progress-ring { transition: stroke-dashoffset 0.5s ease; }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .pulse { animation: pulse 1s infinite; }
    </style>
</head>
<body class="bg-gray-900 min-h-screen text-white">
    <!-- iOS Status Bar -->
    <div class="h-11 flex items-center justify-between px-6 text-white text-sm font-medium">
        <span>9:41</span>
        <div class="flex items-center space-x-1">
            <i class="fas fa-signal"></i>
            <i class="fas fa-wifi"></i>
            <i class="fas fa-battery-full"></i>
        </div>
    </div>

    <!-- Header -->
    <div class="px-6 py-4">
        <div class="flex items-center justify-between">
            <button onclick="exitWorkout()" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center">
                <i class="fas fa-times"></i>
            </button>
            <div class="text-center">
                <p class="text-sm text-gray-400">Full Body Burn</p>
                <p class="font-semibold" id="exercise-counter">Exercise 1 of 8</p>
            </div>
            <button class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center">
                <i class="fas fa-volume-up"></i>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="px-6 flex flex-col items-center">
        <!-- Timer Circle -->
        <div class="relative w-64 h-64 mb-8">
            <svg class="w-full h-full transform -rotate-90">
                <circle cx="128" cy="128" r="120" stroke="#374151" stroke-width="8" fill="none"></circle>
                <circle id="progress-ring" cx="128" cy="128" r="120" stroke="url(#gradient)" stroke-width="8" fill="none" 
                        stroke-dasharray="754" stroke-dashoffset="0" stroke-linecap="round" class="progress-ring"></circle>
                <defs>
                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#667eea"/>
                        <stop offset="100%" style="stop-color:#764ba2"/>
                    </linearGradient>
                </defs>
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
                <p id="timer-display" class="text-6xl font-bold">30</p>
                <p class="text-gray-400">seconds</p>
            </div>
        </div>

        <!-- Exercise Name -->
        <h2 id="exercise-name" class="text-3xl font-bold mb-2 text-center">Push-ups</h2>
        <p id="exercise-reps" class="text-gray-400 mb-8">30 seconds</p>

        <!-- Exercise Image -->
        <div class="w-full h-40 bg-white/5 rounded-2xl overflow-hidden mb-8 relative">
            <img id="exercise-image" src="https://images.unsplash.com/photo-1598971639058-fab3c3109a00?w=400&h=300&fit=crop" alt="Exercise" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
            <p class="absolute bottom-3 left-0 right-0 text-center text-sm text-white/80">Follow the movement</p>
        </div>

        <!-- Controls -->
        <div class="flex items-center justify-center space-x-6 mb-8">
            <button onclick="previousExercise()" class="w-14 h-14 bg-white/10 rounded-full flex items-center justify-center hover:bg-white/20 transition-colors">
                <i class="fas fa-backward-step text-xl"></i>
            </button>
            <button id="play-pause-btn" onclick="toggleTimer()" class="w-20 h-20 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center hover:opacity-90 transition-all pulse">
                <i id="play-pause-icon" class="fas fa-pause text-2xl"></i>
            </button>
            <button onclick="nextExercise()" class="w-14 h-14 bg-white/10 rounded-full flex items-center justify-center hover:bg-white/20 transition-colors">
                <i class="fas fa-forward-step text-xl"></i>
            </button>
        </div>

        <!-- Progress Bar -->
        <div class="w-full mb-4">
            <div class="flex justify-between text-sm text-gray-400 mb-2">
                <span id="elapsed-time">00:00</span>
                <span id="total-time">04:00</span>
            </div>
            <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
                <div id="workout-progress" class="h-full bg-gradient-to-r from-blue-600 to-purple-600 rounded-full transition-all" style="width: 12.5%"></div>
            </div>
        </div>
    </div>

    <!-- Rest Modal -->
    <div id="rest-modal" class="fixed inset-0 bg-black/90 hidden items-center justify-center p-6 z-50">
        <div class="text-center">
            <p class="text-gray-400 mb-2">Rest Time</p>
            <p id="rest-timer" class="text-8xl font-bold mb-4">15</p>
            <p class="text-xl mb-8">Next: <span id="next-exercise" class="font-semibold">Diamond Push-ups</span></p>
            <button onclick="skipRest()" class="bg-white/10 text-white px-8 py-3 rounded-xl font-semibold hover:bg-white/20 transition-colors">
                Skip Rest
            </button>
        </div>
    </div>

    <!-- Workout Complete Modal -->
    <div id="complete-modal" class="fixed inset-0 bg-black/90 hidden items-center justify-center p-6 z-50">
        <div class="text-center">
            <div class="w-24 h-24 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-check text-4xl"></i>
            </div>
            <h2 class="text-3xl font-bold mb-2">Workout Complete!</h2>
            <p class="text-gray-400 mb-8">Great job! You crushed it!</p>
            
            <div class="grid grid-cols-3 gap-4 mb-8">
                <div class="bg-white/10 rounded-xl p-4">
                    <p class="text-2xl font-bold">04:00</p>
                    <p class="text-sm text-gray-400">Duration</p>
                </div>
                <div class="bg-white/10 rounded-xl p-4">
                    <p class="text-2xl font-bold">180</p>
                    <p class="text-sm text-gray-400">Calories</p>
                </div>
                <div class="bg-white/10 rounded-xl p-4">
                    <p class="text-2xl font-bold">8</p>
                    <p class="text-sm text-gray-400">Exercises</p>
                </div>
            </div>
            
            <button onclick="finishWorkout()" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-xl font-semibold mb-3">
                Done
            </button>
            <button onclick="shareWorkout()" class="w-full bg-white/10 text-white py-4 rounded-xl font-semibold">
                <i class="fas fa-share mr-2"></i>Share
            </button>
        </div>
    </div>

    <!-- Exit Confirmation Modal -->
    <div id="exit-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center p-6 z-50">
        <div class="bg-gray-800 rounded-3xl p-6 w-full max-w-sm">
            <h3 class="text-xl font-bold mb-2">Exit Workout?</h3>
            <p class="text-gray-400 mb-6">Your progress will not be saved.</p>
            <button onclick="confirmExit()" class="w-full bg-red-500 text-white py-3 rounded-xl font-semibold mb-3">
                Exit
            </button>
            <button onclick="closeExitModal()" class="w-full bg-white/10 text-white py-3 rounded-xl font-semibold">
                Continue Workout
            </button>
        </div>
    </div>

    <script>
        const exercises = [
            { name: 'Push-ups', duration: 30, icon: 'fa-hand-fist', image: 'https://images.unsplash.com/photo-1598971639058-fab3c3109a00?w=400&h=300&fit=crop' },
            { name: 'Squats', duration: 30, icon: 'fa-person', image: 'https://images.unsplash.com/photo-1574680096145-d05b474e2155?w=400&h=300&fit=crop' },
            { name: 'Plank', duration: 30, icon: 'fa-minus', image: 'https://images.unsplash.com/photo-1566241142559-40e1dab266c6?w=400&h=300&fit=crop' },
            { name: 'Lunges', duration: 30, icon: 'fa-person-walking', image: 'https://images.unsplash.com/photo-1434608519344-49d77a699e1d?w=400&h=300&fit=crop' },
            { name: 'Mountain Climbers', duration: 30, icon: 'fa-mountain', image: 'https://images.unsplash.com/photo-1601422407692-ec4eeec1d9b3?w=400&h=300&fit=crop' },
            { name: 'Burpees', duration: 30, icon: 'fa-arrow-up', image: 'https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400&h=300&fit=crop' },
            { name: 'Tricep Dips', duration: 30, icon: 'fa-chair', image: 'https://images.unsplash.com/photo-1530822847156-5df684ec5ee1?w=400&h=300&fit=crop' },
            { name: 'Jumping Jacks', duration: 30, icon: 'fa-person-rays', image: 'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400&h=300&fit=crop' }
        ];

        let currentExercise = 0;
        let timeLeft = exercises[0].duration;
        let isRunning = true;
        let timerInterval = null;
        let totalElapsed = 0;
        const totalDuration = exercises.reduce((sum, ex) => sum + ex.duration, 0);

        function updateDisplay() {
            document.getElementById('timer-display').textContent = timeLeft;
            document.getElementById('exercise-name').textContent = exercises[currentExercise].name;
            document.getElementById('exercise-reps').textContent = `${exercises[currentExercise].duration} seconds`;
            document.getElementById('exercise-counter').textContent = `Exercise ${currentExercise + 1} of ${exercises.length}`;
            document.getElementById('exercise-image').src = exercises[currentExercise].image;
            
            // Update progress ring
            const progress = (exercises[currentExercise].duration - timeLeft) / exercises[currentExercise].duration;
            const offset = 754 * (1 - progress);
            document.getElementById('progress-ring').style.strokeDashoffset = offset;
            
            // Update workout progress bar
            const workoutProgress = ((currentExercise + (1 - timeLeft / exercises[currentExercise].duration)) / exercises.length) * 100;
            document.getElementById('workout-progress').style.width = `${workoutProgress}%`;
            
            // Update elapsed time
            const mins = Math.floor(totalElapsed / 60);
            const secs = totalElapsed % 60;
            document.getElementById('elapsed-time').textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                if (isRunning) {
                    timeLeft--;
                    totalElapsed++;
                    updateDisplay();
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        if (currentExercise < exercises.length - 1) {
                            showRestModal();
                        } else {
                            showCompleteModal();
                        }
                    }
                }
            }, 1000);
        }

        function toggleTimer() {
            isRunning = !isRunning;
            const icon = document.getElementById('play-pause-icon');
            const btn = document.getElementById('play-pause-btn');
            
            if (isRunning) {
                icon.className = 'fas fa-pause text-2xl';
                btn.classList.add('pulse');
            } else {
                icon.className = 'fas fa-play text-2xl';
                btn.classList.remove('pulse');
            }
        }

        function nextExercise() {
            if (currentExercise < exercises.length - 1) {
                currentExercise++;
                timeLeft = exercises[currentExercise].duration;
                updateDisplay();
                startTimer();
            }
        }

        function previousExercise() {
            if (currentExercise > 0) {
                currentExercise--;
                timeLeft = exercises[currentExercise].duration;
                updateDisplay();
                startTimer();
            }
        }

        function showRestModal() {
            document.getElementById('rest-modal').classList.remove('hidden');
            document.getElementById('rest-modal').classList.add('flex');
            document.getElementById('next-exercise').textContent = exercises[currentExercise + 1].name;
            
            let restTime = 15;
            document.getElementById('rest-timer').textContent = restTime;
            
            const restInterval = setInterval(() => {
                restTime--;
                document.getElementById('rest-timer').textContent = restTime;
                
                if (restTime <= 0) {
                    clearInterval(restInterval);
                    skipRest();
                }
            }, 1000);
            
            window.currentRestInterval = restInterval;
        }

        function skipRest() {
            if (window.currentRestInterval) clearInterval(window.currentRestInterval);
            document.getElementById('rest-modal').classList.add('hidden');
            document.getElementById('rest-modal').classList.remove('flex');
            nextExercise();
        }

        function showCompleteModal() {
            document.getElementById('complete-modal').classList.remove('hidden');
            document.getElementById('complete-modal').classList.add('flex');
        }

        function exitWorkout() {
            isRunning = false;
            document.getElementById('exit-modal').classList.remove('hidden');
            document.getElementById('exit-modal').classList.add('flex');
        }

        function closeExitModal() {
            document.getElementById('exit-modal').classList.add('hidden');
            document.getElementById('exit-modal').classList.remove('flex');
            isRunning = true;
        }

        function confirmExit() {
            window.location.href = 'workout.html';
        }

        function finishWorkout() {
            window.location.href = 'home.html';
        }

        function shareWorkout() {
            alert('Share functionality would open native share sheet');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateDisplay();
            startTimer();
        });
    </script>
</body>
</html>
